#!/bin/sh

echo "ğŸ” Running pre-commit checks..."

# 1. Lint staged files (fast, incremental)
echo "ğŸ“ Linting staged files..."
bunx lint-staged
if [ $? -ne 0 ]; then
  echo "âŒ Lint-staged failed"
  exit 1
fi

# 2. TypeScript type checking
echo "ğŸ”· Running typecheck..."
bun run typecheck
if [ $? -ne 0 ]; then
  echo "âŒ Typecheck failed"
  exit 1
fi

# 3. Build all packages
echo "ğŸ”¨ Running build..."
bun run build
if [ $? -ne 0 ]; then
  echo "âŒ Build failed"
  exit 1
fi

# 4. Run all tests
echo "ğŸ§ª Running tests..."
bun run test
if [ $? -ne 0 ]; then
  echo "âŒ Tests failed"
  exit 1
fi

echo "âœ… All pre-commit checks passed!"
