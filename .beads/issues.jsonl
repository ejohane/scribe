{"id":"redesign-1","title":"Navigation History Feature","description":"Browser-style navigation history with back/forward buttons. Replaces current LIFO stack with dual-pointer model supporting forward navigation.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-05T20:36:50.430342-06:00","updated_at":"2025-12-05T21:16:26.490964-06:00","closed_at":"2025-12-05T21:16:26.490964-06:00"}
{"id":"redesign-10","title":"Delete BackButton component","description":"Remove the BackButton component entirely:\n- Delete components/BackButton/BackButton.tsx\n- Delete components/BackButton/BackButton.css.ts\n- Delete components/BackButton/index.ts\nThis is replaced by NavigationButtons component.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-05T20:37:42.270239-06:00","updated_at":"2025-12-05T21:10:16.682124-06:00","closed_at":"2025-12-05T21:10:16.682124-06:00","dependencies":[{"issue_id":"redesign-10","depends_on_id":"redesign-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"redesign-10","depends_on_id":"redesign-9","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"redesign-11","title":"Integration test: Wiki-link navigation history","description":"Write integration test in history.integration.test.ts:\n- Open note A, click wiki-link to B, click wiki-link to C\n- Verify can go back twice to A\n- Verify forward navigation works after going back\nTest file: apps/desktop/history.integration.test.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-05T20:37:47.254512-06:00","updated_at":"2025-12-05T21:16:01.946051-06:00","closed_at":"2025-12-05T21:16:01.946051-06:00","dependencies":[{"issue_id":"redesign-11","depends_on_id":"redesign-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"redesign-11","depends_on_id":"redesign-9","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"redesign-12","title":"Integration test: Back then forward navigation","description":"Write integration test in history.integration.test.ts:\n- Navigate A-\u003eB-\u003eC\n- Go back twice (to A)\n- Go forward once (to B)\n- Verify correct note is displayed at each step\nTest file: apps/desktop/history.integration.test.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-05T20:37:51.490908-06:00","updated_at":"2025-12-05T21:16:02.745038-06:00","closed_at":"2025-12-05T21:16:02.745038-06:00","dependencies":[{"issue_id":"redesign-12","depends_on_id":"redesign-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"redesign-12","depends_on_id":"redesign-9","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"redesign-13","title":"Integration test: Branch history (navigate after back)","description":"Write integration test in history.integration.test.ts:\n- Navigate A-\u003eB-\u003eC\n- Go back to B\n- Navigate to D (via wiki-link or sidebar)\n- Verify forward button is disabled (C was truncated)\n- Verify can go back to B, then to A\nTest file: apps/desktop/history.integration.test.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-05T20:37:56.330849-06:00","updated_at":"2025-12-05T21:16:03.458694-06:00","closed_at":"2025-12-05T21:16:03.458694-06:00","dependencies":[{"issue_id":"redesign-13","depends_on_id":"redesign-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"redesign-13","depends_on_id":"redesign-9","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"redesign-14","title":"Integration test: Sidebar navigation adds to history","description":"Write integration test in history.integration.test.ts:\n- Open note A\n- Select note B from sidebar\n- Verify stack is [A, B] and can go back\n- Previously sidebar navigation may have cleared history - verify this no longer happens\nTest file: apps/desktop/history.integration.test.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-05T20:38:00.948991-06:00","updated_at":"2025-12-05T21:16:04.103919-06:00","closed_at":"2025-12-05T21:16:04.103919-06:00","dependencies":[{"issue_id":"redesign-14","depends_on_id":"redesign-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"redesign-14","depends_on_id":"redesign-9","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"redesign-15","title":"Integration test: Command palette navigation adds to history","description":"Write integration test in history.integration.test.ts:\n- Open note A\n- Open note B via Cmd+O command palette\n- Verify stack is [A, B] and can go back\n- Previously command palette navigation cleared history - verify this no longer happens\nTest file: apps/desktop/history.integration.test.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-05T20:38:05.37321-06:00","updated_at":"2025-12-05T21:16:07.595989-06:00","closed_at":"2025-12-05T21:16:07.595989-06:00","dependencies":[{"issue_id":"redesign-15","depends_on_id":"redesign-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"redesign-15","depends_on_id":"redesign-9","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"redesign-16","title":"Integration test: Context panel/backlink navigation adds to history","description":"Write integration test in history.integration.test.ts:\n- Open note A\n- Click backlink to note B in context panel\n- Verify stack is [A, B] and can go back\nTest file: apps/desktop/history.integration.test.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-05T20:38:09.67488-06:00","updated_at":"2025-12-05T21:16:08.265605-06:00","closed_at":"2025-12-05T21:16:08.265605-06:00","dependencies":[{"issue_id":"redesign-16","depends_on_id":"redesign-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"redesign-16","depends_on_id":"redesign-9","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"redesign-17","title":"Integration test: Delete note in history","description":"Write integration test in history.integration.test.ts:\n- Navigate A-\u003eB-\u003eC\n- Delete note B\n- Verify B is removed from history stack\n- Verify can still navigate back (now directly A-\u003eC)\nTest file: apps/desktop/history.integration.test.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-05T20:38:13.950774-06:00","updated_at":"2025-12-05T21:16:08.999143-06:00","closed_at":"2025-12-05T21:16:08.999143-06:00","dependencies":[{"issue_id":"redesign-17","depends_on_id":"redesign-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"redesign-17","depends_on_id":"redesign-9","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"redesign-17","depends_on_id":"redesign-8","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"redesign-18","title":"Integration test: Keyboard shortcuts (Cmd+] forward)","description":"Write integration test in history.integration.test.ts:\n- Navigate A-\u003eB-\u003eC\n- Press Cmd+[ to go back (existing)\n- Verify now on B\n- Press Cmd+] to go forward (new)\n- Verify now on C\nTest file: apps/desktop/history.integration.test.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-05T20:38:19.373726-06:00","updated_at":"2025-12-05T21:16:09.738591-06:00","closed_at":"2025-12-05T21:16:09.738591-06:00","dependencies":[{"issue_id":"redesign-18","depends_on_id":"redesign-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"redesign-18","depends_on_id":"redesign-6","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"redesign-18","depends_on_id":"redesign-9","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"redesign-19","title":"Fix stale closure in navigateBack and navigateForward","description":"Both functions read from state in the outer scope but use setState with a callback. This can cause stale reads under rapid successive calls. The prevNoteId/nextNoteId is read from potentially stale closure state before setState callback executes. Fix by reading the note ID inside the setState callback or use useEffect to trigger loadNote based on state changes.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-07T12:33:31.614678-06:00","updated_at":"2025-12-07T12:40:20.690836-06:00","closed_at":"2025-12-07T12:40:20.690836-06:00"}
{"id":"redesign-2","title":"Refactor useNavigationHistory hook to dual-pointer model","description":"Replace current LIFO stack with NavigationState { stack: NoteId[], currentIndex: number }. Implement:\n- navigateToNote(): truncates forward history, pushes new note, handles FIFO eviction at 1000 items\n- navigateBack(): decrements currentIndex, loads previous note\n- navigateForward(): increments currentIndex, loads next note  \n- removeFromHistory(): removes deleted note from stack, adjusts currentIndex\n- canGoBack/canGoForward computed from currentIndex position\n- No-op when navigating to current note\nRemove clearHistory() - it will be deleted from the API.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-05T20:36:57.493789-06:00","updated_at":"2025-12-05T20:44:36.000233-06:00","closed_at":"2025-12-05T20:44:36.000233-06:00","dependencies":[{"issue_id":"redesign-2","depends_on_id":"redesign-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"redesign-20","title":"Reset hasSeededRef when clearHistory is called","description":"When clearHistory() is called, hasSeededRef remains true, preventing re-seeding if the app loads a new note. Although clearHistory is no longer called in App.tsx, it's still exported and could cause bugs if used in the future. Fix by adding hasSeededRef.current = false in clearHistory callback.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-07T12:33:33.173681-06:00","updated_at":"2025-12-07T12:49:09.010637-06:00","closed_at":"2025-12-07T12:49:09.010637-06:00"}
{"id":"redesign-21","title":"Navigate to adjacent note when current note is deleted from history","description":"When the currently viewed note is deleted and removed from history via removeFromHistory, the index adjusts but no loadNote is called. The user remains viewing a deleted note's content until they manually navigate. Should trigger navigation to the new current position after removing the current note.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-07T12:33:34.71765-06:00","updated_at":"2025-12-07T12:40:22.214912-06:00","closed_at":"2025-12-07T12:40:22.214912-06:00"}
{"id":"redesign-22","title":"Use consistent keyboard shortcut symbols in UI","description":"The old BackButton used ⌘[ but the new NavigationButtons uses Cmd+[. Consider using the Unicode symbol (⌘) for consistency with macOS conventions in the title attribute.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-07T12:33:36.348967-06:00","updated_at":"2025-12-07T12:49:09.025239-06:00","closed_at":"2025-12-07T12:49:09.025239-06:00"}
{"id":"redesign-23","title":"Add comment explaining integration test NavigationHistory simulation","description":"The NavigationHistory class in history.integration.test.ts duplicates the hook's logic rather than testing the real hook. Add a comment explaining this is intentional simulation for testing navigation flows without React/DOM dependencies, or consider using @testing-library/react-hooks to test the real hook.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-07T12:33:38.085496-06:00","updated_at":"2025-12-07T12:49:09.045478-06:00","closed_at":"2025-12-07T12:49:09.045478-06:00"}
{"id":"redesign-24","title":"Remove unused historyStack and currentIndex exports or document their purpose","description":"The hook exports historyStack and currentIndex but they're not consumed in App.tsx. Either remove them from the public API if unused, or add a comment about their intended use (debugging, future features, etc.).","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-07T12:33:39.556156-06:00","updated_at":"2025-12-07T12:49:09.038741-06:00","closed_at":"2025-12-07T12:44:20.775292-06:00"}
{"id":"redesign-25","title":"Make removeFromHistory required in CommandPalette props","description":"CommandPalette's removeFromHistory prop is optional but always passed from App.tsx. Making it required would ensure the delete behavior is always consistent and prevent potential bugs if someone forgets to pass it.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-07T12:33:41.159975-06:00","updated_at":"2025-12-07T12:49:09.018507-06:00","closed_at":"2025-12-07T12:49:09.018507-06:00"}
{"id":"redesign-26","title":"Consider refactoring useNavigationHistory to use useReducer","description":"The navigation state has multiple interdependent operations (navigate, back, forward, remove). A reducer pattern would make the state transitions more explicit and testable. Actions could be: NAVIGATE, BACK, FORWARD, REMOVE, CLEAR. This is a nice-to-have refactor for improved maintainability.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-07T12:33:43.01807-06:00","updated_at":"2025-12-07T12:49:09.032053-06:00","closed_at":"2025-12-07T12:49:09.032053-06:00"}
{"id":"redesign-3","title":"Unit tests for useNavigationHistory dual-pointer model","description":"Write comprehensive unit tests in useNavigationHistory.test.ts:\n- Initial state: canGoBack=false, canGoForward=false\n- Single navigation: stack=[A], currentIndex=0\n- Multiple navigations: A-\u003eB-\u003eC results in stack=[A,B,C], currentIndex=2\n- Navigate back: decrements index, canGoForward becomes true\n- Navigate forward: increments index\n- Navigate after back (branch): truncates forward history, stack=[A,B,D]\n- Duplicate navigation: no-op, state unchanged\n- Max history (1000): first item removed on overflow, index adjusted\n- Remove from history: stack adjusted, index corrected for removed items\n- Remove current note: navigates to adjacent note","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-05T20:37:04.04368-06:00","updated_at":"2025-12-05T20:57:30.463598-06:00","closed_at":"2025-12-05T20:53:17.155211-06:00","dependencies":[{"issue_id":"redesign-3","depends_on_id":"redesign-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"redesign-3","depends_on_id":"redesign-2","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"redesign-4","title":"Create NavigationButtons component","description":"Create new NavigationButtons component in components/NavigationButtons/:\n- NavigationButtons.tsx: Two buttons (back/forward) side by side\n- Props: canGoBack, canGoForward, onBack, onForward\n- Use Button from design-system with variant='ghost', tone='neutral', size='sm'\n- ArrowLeftIcon for back, ArrowRightIcon for forward\n- disabled prop when can't navigate\n- aria-label for accessibility ('Go back to previous note', 'Go forward to next note')\n- title with keyboard hints ('Go back (Cmd+[)', 'Go forward (Cmd+])')\n- NavigationButtons.css.ts: container styles (position fixed, top 48px, left 16px, z-index 100, gap 4px)\n- Disabled state: opacity 0.3, cursor not-allowed\n- index.ts: export component","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-05T20:37:12.445599-06:00","updated_at":"2025-12-05T20:44:37.500898-06:00","closed_at":"2025-12-05T20:44:37.500898-06:00","dependencies":[{"issue_id":"redesign-4","depends_on_id":"redesign-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"redesign-5","title":"Component tests for NavigationButtons","description":"Write component tests in NavigationButtons.test.tsx:\n- Both disabled: canGoBack=false, canGoForward=false - both buttons have disabled styling\n- Back enabled only: canGoBack=true, canGoForward=false - back enabled, forward disabled\n- Forward enabled only: canGoBack=false, canGoForward=true - back disabled, forward enabled\n- Both enabled: canGoBack=true, canGoForward=true - both buttons enabled\n- Back click: clicking back button calls onBack\n- Forward click: clicking forward button calls onForward\n- Disabled back click: clicking disabled back button does NOT call onBack\n- Disabled forward click: clicking disabled forward button does NOT call onForward\n- Accessibility: verify aria-labels and titles are present","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-05T20:37:18.378293-06:00","updated_at":"2025-12-05T21:06:36.533257-06:00","closed_at":"2025-12-05T21:06:36.533257-06:00","dependencies":[{"issue_id":"redesign-5","depends_on_id":"redesign-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"redesign-5","depends_on_id":"redesign-4","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"redesign-6","title":"Add Cmd+] keyboard shortcut for forward navigation","description":"In App.tsx, add keyboard shortcut handling for forward navigation:\n- Register Cmd+] (Mac) / Ctrl+] (Windows/Linux) for navigateForward()\n- Mirror the existing Cmd+[ implementation for consistency\n- Ensure shortcut only fires when forward navigation is available","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-05T20:37:22.809441-06:00","updated_at":"2025-12-05T20:57:32.095355-06:00","closed_at":"2025-12-05T20:57:32.095355-06:00","dependencies":[{"issue_id":"redesign-6","depends_on_id":"redesign-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"redesign-6","depends_on_id":"redesign-2","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"redesign-7","title":"Remove clearHistory() calls from App.tsx","description":"Remove all calls to clearHistory() from App.tsx. Per the new design:\n- All navigation actions (sidebar, command palette, wiki-links, context panel, backlinks) push onto the history stack\n- No navigation should clear the history anymore\n- Remove any logic that calls clearHistory() when opening notes via command palette or creating new notes","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-05T20:37:27.888973-06:00","updated_at":"2025-12-05T20:57:33.926291-06:00","closed_at":"2025-12-05T20:57:33.926291-06:00","dependencies":[{"issue_id":"redesign-7","depends_on_id":"redesign-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"redesign-7","depends_on_id":"redesign-2","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"redesign-8","title":"Wire removeFromHistory to note deletion","description":"Connect removeFromHistory() to note deletion flow in App.tsx:\n- When a note is deleted, call removeFromHistory(deletedNoteId)\n- This removes all occurrences of the deleted note from the history stack\n- If the deleted note was the current note, the hook will handle navigation to adjacent note\n- Ensure this integrates with existing delete note flow","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-05T20:37:32.990248-06:00","updated_at":"2025-12-05T20:57:35.793725-06:00","closed_at":"2025-12-05T20:57:35.793725-06:00","dependencies":[{"issue_id":"redesign-8","depends_on_id":"redesign-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"redesign-8","depends_on_id":"redesign-2","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"redesign-9","title":"Replace BackButton with NavigationButtons in App.tsx","description":"Update App.tsx to use new NavigationButtons component:\n- Remove BackButton import and usage\n- Add NavigationButtons import\n- Pass canGoBack, canGoForward, onBack (navigateBack), onForward (navigateForward)\n- Buttons should always be visible (not conditionally rendered), relying on disabled state instead","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-05T20:37:38.031196-06:00","updated_at":"2025-12-05T21:06:37.693049-06:00","closed_at":"2025-12-05T21:06:37.693049-06:00","dependencies":[{"issue_id":"redesign-9","depends_on_id":"redesign-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"redesign-9","depends_on_id":"redesign-2","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"redesign-9","depends_on_id":"redesign-4","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
