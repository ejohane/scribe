{"id":"scribe-g6j","title":"Tech Debt Remediation Q1 2025","description":"Comprehensive tech debt remediation epic based on thorough codebase analysis. Covers:\n- Large file refactoring (10+ files over 400 lines)\n- Code duplication elimination (9 major duplication patterns)\n- Dead code removal (~40 unused exports)\n- Test coverage improvements (CLI utilities, Lexical nodes)\n- Documentation gaps (5 modules lacking docs)\n- Legacy patterns cleanup (any usage, inconsistent handler patterns)\n\n## Priority Areas\n1. content-extractor.ts (1031 lines) - highest impact refactor\n2. Duplicate content creation functions (6+ locations)\n3. CLI utilities missing tests (cli-installer.ts, input.ts)\n4. Error system consolidation (2 separate ErrorCode enums)\n\n## Refined Dependency Graph\n\n### Wave 1: Fully Parallel (No blockers - start immediately)\nThese 22 tasks can run in parallel with no dependencies:\n\n**P1 (Critical Path):**\n- g6j.1: Refactor content-extractor.ts → UNBLOCKS g6j.28\n- g6j.5: Merge CLI ErrorCode enum into shared package\n- g6j.21: Add unit tests for cli-installer.ts\n- g6j.22: Add unit tests for CLI input.ts\n\n**P1 Content Consolidation (parallel with each other):**\n- g6j.7: Consolidate createDailyContent → UNBLOCKS g6j.12, g6j.2\n- g6j.8: Consolidate createMeetingContent → UNBLOCKS g6j.12, g6j.2\n- g6j.9: Consolidate createPersonContent → UNBLOCKS g6j.12, g6j.2\n\n**P2 Independent:**\n- g6j.3: Split TableKeyboardPlugin.tsx into modules\n- g6j.6: Consolidate wrapError function\n- g6j.10: Standardize createEmptyContent\n- g6j.16: Remove deprecated LexicalState/LexicalNode\n- g6j.23-26: Unit tests (config.ts, PersonMentionNode, InlineLinkNode, tasksHandlers)\n- g6j.27: Fix skipped rollback tests\n- g6j.33: Refactor handlers to use EngineOrchestrator\n\n**P3 Dead Code Removal (fully parallel):**\n- g6j.13: Remove unused error exports\n- g6j.14: Remove unused date utility exports\n- g6j.15: Remove unused note type guards\n- g6j.17: Clean up storage-fs internal exports\n\n**P3 Documentation (fully parallel):**\n- g6j.29: JSDoc for createCLI\n- g6j.30: JSDoc for createWindow\n- g6j.31: Document magic numbers\n- g6j.34: Convert Promise .then() to async/await\n\n**P3 Hooks Refactoring:**\n- g6j.4: Extract autocomplete hooks\n- g6j.11: Consolidate desktop logger\n\n### Wave 2: After Content Consolidation (g6j.7, g6j.8, g6j.9)\n- g6j.2: Consolidate note-factory.ts patterns (needs content functions)\n- g6j.12: Migrate test helpers to @scribe/test-utils\n\n### Wave 3: After g6j.1\n- g6j.28: Document escapeMarkdownText algorithm (after refactor)\n\n### Wave 4: After g6j.12 + g6j.2\n- g6j.32: Create test utilities to eliminate `as any` casts\n\n## Closed as Already Done\n- g6j.18, g6j.19, g6j.20 (design-system primitive tests already exist)\n\n## Recommended Execution Order\n1. Start Wave 1 tasks in parallel (max parallelism)\n2. As g6j.7, g6j.8, g6j.9 complete → start g6j.2, g6j.12\n3. As g6j.1 completes → start g6j.28\n4. As g6j.12 + g6j.2 complete → start g6j.32","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-23T13:26:29.700381-06:00","updated_at":"2025-12-23T14:37:57.01957-06:00","closed_at":"2025-12-23T14:37:57.01957-06:00"}
{"id":"scribe-g6j.1","title":"Refactor content-extractor.ts (1031 lines) into modular components","description":"Refactor content-extractor.ts (1031 lines) into modular components.\n\nThe largest file in the codebase. Converts Scribe notes (Lexical editor format) to Markdown format.\n\n**Current responsibilities (too many):**\n- Markdown escaping logic (~156 lines, lines 247-402 - `escapeMarkdownText`)\n- Block-level node conversion (headings, paragraphs, lists, tables, code)\n- Inline content extraction (text, links, mentions)\n- YAML frontmatter generation\n- Context tracking during conversion\n\n**Proposed refactor - create new files in packages/shared/src/:**\n1. `markdown-escaper.ts` - All escapeMarkdownText logic (~156 lines)\n2. `block-converters.ts` - Block-level node conversion\n3. `inline-converters.ts` - Inline content extraction\n4. `frontmatter.ts` - YAML frontmatter generation\n5. Keep `content-extractor.ts` as orchestrator (public API only, ~100 lines)\n\n**Implementation Steps:**\n1. Extract escapeMarkdownText to markdown-escaper.ts first (most isolated, lines 247-402)\n2. Extract frontmatter generation to frontmatter.ts\n3. Extract block converters (maintains internal helper functions)\n4. Extract inline converters\n5. Update content-extractor.ts to import and orchestrate\n6. Ensure all tests pass: `bun test packages/shared`\n7. Update package exports in packages/shared/src/index.ts if needed\n\n**Key files:**\n- packages/shared/src/content-extractor.ts (source)\n- packages/shared/src/content-extractor.test.ts (verify with existing tests)\n\n**Parallel safe:** No dependencies on other tasks.\n\n**UNBLOCKS:** scribe-g6j.28 (documentation of escapeMarkdownText algorithm)\n\nFiles: packages/shared/src/content-extractor.ts, packages/shared/src/markdown-escaper.ts (NEW), packages/shared/src/block-converters.ts (NEW), packages/shared/src/inline-converters.ts (NEW), packages/shared/src/frontmatter.ts (NEW)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T13:26:29.775576-06:00","updated_at":"2025-12-23T14:02:26.403019-06:00","closed_at":"2025-12-23T14:02:26.403019-06:00","dependencies":[{"issue_id":"scribe-g6j.1","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:29.77592-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.10","title":"Standardize createEmptyContent across packages","description":"Standardize createEmptyContent across packages.\n\nThree different createEmptyContent implementations with structural differences:\n\n**Shared (packages/shared/src/content.ts, lines 17-36):** ✓ CANONICAL\n- Returns root with empty paragraph including format, indent, direction, version properties\n- Already exported from @scribe/shared\n\n**CLI (apps/cli/src/node-builder.ts, lines 149-159):** DIFFERENT STRUCTURE\n- Returns root with empty children array (no paragraph)\n- Inconsistent with shared package\n\n**Test-utils (packages/test-utils/src/note-factory.ts, lines 113-120):**\n- Returns root with empty children array\n- Re-exports from @scribe/shared in index.ts\n\n**Implementation Steps:**\n1. Verify shared createEmptyContent is the correct structure (with empty paragraph)\n2. Update CLI `apps/cli/src/node-builder.ts` to import from @scribe/shared instead of defining locally\n3. Remove local createEmptyContent from node-builder.ts\n4. Verify test-utils already re-exports from shared (it does in index.ts, but has local copy in note-factory.ts)\n5. Remove duplicate from note-factory.ts, use import from shared\n6. Run `bun test apps/cli` and `bun test packages/test-utils` to verify\n\n**Parallel safe:** No dependencies on other tasks. Can run in parallel with g6j.7, g6j.8, g6j.9.\n\nFiles: packages/shared/src/content.ts, apps/cli/src/node-builder.ts, packages/test-utils/src/note-factory.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T13:26:30.497212-06:00","updated_at":"2025-12-23T14:02:09.321195-06:00","closed_at":"2025-12-23T14:02:09.321195-06:00","dependencies":[{"issue_id":"scribe-g6j.10","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:30.497714-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.11","title":"Consolidate desktop logger to extend shared logger","description":"Two separate logger systems with different APIs:\n\nShared (packages/shared/src/logger.ts, 265 lines):\n- Full-featured with child loggers and structured context\n- Uses LOG_LEVEL environment variable\n- API: log.debug('message', { key: value })\n\nDesktop (apps/desktop/electron/main/src/logger.ts, 125 lines):\n- Simpler logger with pre-configured contexts\n- Different API: log.debug('message', value1, value2)\n- Different output format\n\nSolution: Desktop logger should extend or use the shared logger for consistency. This ensures logging behavior is uniform across CLI and desktop.\n\nFiles: apps/desktop/electron/main/src/logger.ts, packages/shared/src/logger.ts","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T13:26:30.580902-06:00","updated_at":"2025-12-23T14:33:38.69032-06:00","closed_at":"2025-12-23T14:33:38.69032-06:00","dependencies":[{"issue_id":"scribe-g6j.11","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:30.581249-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.12","title":"Migrate test helpers to @scribe/test-utils package","description":"Migrate test helper code from desktop to @scribe/test-utils package.\n\n**BLOCKED BY:** scribe-g6j.7, scribe-g6j.8, scribe-g6j.9 (content function consolidation must complete first)\n\nDesktop (apps/desktop/test-helpers.ts):\n- setupTestContext, cleanupTestContext (lines 54-94)\n- createNoteContent, createNoteWithTitle, createAndIndexNote (lines 163-396)\n- createPersonContent, createDailyContent, createMeetingContent re-exports\n\nTest-utils (packages/test-utils/):\n- vault-factory.ts: createTestVault, cleanupTestVault (lines 76-182)\n- note-factory.ts: createTestNote, createMockNote, createGraphTestNote (lines 343-576)\n\n**Implementation Steps:**\n1. Wait for content function consolidation (g6j.7, g6j.8, g6j.9) to complete\n2. Import consolidated content functions into test-utils from @scribe/shared or templates\n3. Move desktop test helpers that create content to use shared imports\n4. Migrate commonly-used helpers from desktop/test-helpers.ts to @scribe/test-utils\n5. Update desktop integration tests to use @scribe/test-utils\n6. Run all integration tests to verify migration: `bun test apps/desktop`\n\n**UNBLOCKS:** scribe-g6j.32 (test utilities for `as any` elimination)\n\nFiles: apps/desktop/test-helpers.ts, packages/test-utils/src/vault-factory.ts, packages/test-utils/src/note-factory.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T13:26:30.660177-06:00","updated_at":"2025-12-23T14:18:49.872744-06:00","closed_at":"2025-12-23T14:18:49.872744-06:00","dependencies":[{"issue_id":"scribe-g6j.12","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:30.660589-06:00","created_by":"daemon"},{"issue_id":"scribe-g6j.12","depends_on_id":"scribe-g6j.7","type":"blocks","created_at":"2025-12-23T13:33:09.820129-06:00","created_by":"daemon"},{"issue_id":"scribe-g6j.12","depends_on_id":"scribe-g6j.8","type":"blocks","created_at":"2025-12-23T13:33:10.759456-06:00","created_by":"daemon"},{"issue_id":"scribe-g6j.12","depends_on_id":"scribe-g6j.9","type":"blocks","created_at":"2025-12-23T13:33:11.571243-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.13","title":"Remove unused error type exports (SyncConflictError, MigrationError, etc)","description":"Unused error type exports in packages/shared/src/errors.ts:\n\nNever imported outside test files or exports:\n- SyncConflictError, isSyncConflictError (lines 362-370, 437-439)\n- MigrationError, isMigrationError (lines 375-383, 444-446)\n- TaskNotFoundError, isTaskNotFoundError (lines 352-357, 430-432)\n- isFileSystemError (lines 395-397) - only test file\n- isNoteError (lines 402-404) - only test file\n- isVaultError (lines 409-411) - never imported\n- isEngineError (lines 416-418) - never imported\n- isValidationError (lines 423-425) - only test file\n- getErrorMessageWithContext (lines 506-513) - only test file\n- FileSystemError, NoteError, VaultError, EngineError classes - never imported from package\n\nOptions:\n1. Remove unused exports from barrel\n2. Mark as internal-only\n3. Document as future API\n\nFiles: packages/shared/src/errors.ts","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T13:26:30.743631-06:00","updated_at":"2025-12-23T14:18:13.383099-06:00","closed_at":"2025-12-23T14:18:13.383099-06:00","dependencies":[{"issue_id":"scribe-g6j.13","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:30.744032-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.14","title":"Remove unused date utility exports (formatDateMMDDYYYY, startOfDay, etc)","description":"Unused date utility exports in packages/shared/src/date-utils.ts:\n\nNever imported anywhere:\n- formatDateMMDDYYYY (lines 108-117)\n- parseDateMMDDYYYY (lines 271-285)\n- startOfDay (lines 409-418)\n- endOfDay (lines 429-438)\n- getDaysBetween (lines 379-394)\n\nThese may be useful future APIs but are currently dead code.\n\nOptions:\n1. Remove from barrel export, keep in file for future use\n2. Remove entirely if not planned\n3. Document as available utilities\n\nFiles: packages/shared/src/date-utils.ts","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T13:26:30.829382-06:00","updated_at":"2025-12-23T14:20:27.944773-06:00","closed_at":"2025-12-23T14:20:27.944773-06:00","dependencies":[{"issue_id":"scribe-g6j.14","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:30.829781-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.15","title":"Remove unused note type guards (isRegularNote, isProjectNote, etc)","description":"Unused note type guards in packages/shared/src/types/note-types.ts:\n\nNever imported outside the file:\n- isRegularNote (lines 472-474)\n- isProjectNote (lines 516-518)\n- isTemplateNote (lines 538-540)\n- isSystemNote (lines 561-563)\n\nThese type guards are exported but never used in the codebase.\n\nOptions:\n1. Remove from exports if truly unused\n2. Keep if planned for future discriminated union handling\n3. Document intended usage\n\nFiles: packages/shared/src/types/note-types.ts","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T13:26:30.916949-06:00","updated_at":"2025-12-23T14:18:52.980651-06:00","closed_at":"2025-12-23T14:18:52.980651-06:00","dependencies":[{"issue_id":"scribe-g6j.15","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:30.917414-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.16","title":"Remove deprecated LexicalState and LexicalNode type aliases","description":"Deprecated type aliases still in codebase (packages/shared/src/types/editor-types.ts):\n\n- LexicalState (line 97) - @deprecated, use EditorContent\n- LexicalNode (line 102) - @deprecated, use EditorNode\n\nThese are marked deprecated but still exported. No imports found outside exports.\n\nSolution:\n1. Search for any remaining usages\n2. Remove the deprecated aliases\n3. Update any remaining code to use EditorContent/EditorNode\n\nFiles: packages/shared/src/types/editor-types.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T13:26:31.00205-06:00","updated_at":"2025-12-23T14:09:35.758767-06:00","closed_at":"2025-12-23T14:09:35.758767-06:00","dependencies":[{"issue_id":"scribe-g6j.16","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:31.002415-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.17","title":"Clean up storage-fs internal exports (NoteValidator, AtomicFileWriter, etc)","description":"Internal utilities exported publicly from storage-fs (packages/storage-fs/src/index.ts):\n\nExported but only used internally or in tests:\n- NoteValidator, INoteValidator, ValidationResult (lines 10-14)\n- AtomicFileWriter, IAtomicFileWriter, AtomicWriteOptions (lines 16-20)\n- NoteMigrator, INoteMigrator, NOTE_FORMAT_VERSION (lines 22-26)\n- QuarantineManager, createQuarantineManager, IQuarantineManager (lines 27-31)\n\nThese are implementation details, not public API. QuarantineManager is accessed via vault method.\n\nSolution: Make these internal-only, remove from barrel export. If external testing needs access, expose via test-utils package instead.\n\nFiles: packages/storage-fs/src/index.ts","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T13:26:31.093468-06:00","updated_at":"2025-12-23T14:21:29.36849-06:00","closed_at":"2025-12-23T14:21:29.36849-06:00","dependencies":[{"issue_id":"scribe-g6j.17","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:31.093871-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.18","title":"Add unit tests for design-system Button primitive","description":"Design system Button primitive has no unit tests.\n\nFile: packages/design-system/src/primitives/Button/Button.tsx\n\nCurrent coverage: 0%\nPackage coverage: 17% overall\n\nTests needed:\n- Render with different variants\n- Click handler invocation\n- Disabled state\n- Loading state (if applicable)\n- Accessibility attributes\n\nFiles: packages/design-system/src/primitives/Button/Button.tsx","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T13:26:31.181248-06:00","updated_at":"2025-12-23T13:33:01.52612-06:00","closed_at":"2025-12-23T13:33:01.52612-06:00","dependencies":[{"issue_id":"scribe-g6j.18","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:31.181637-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.19","title":"Add unit tests for design-system Calendar primitive","description":"Design system Calendar primitive has no unit tests.\n\nFile: packages/design-system/src/primitives/Calendar/Calendar.tsx\n\nCurrent coverage: 0%\nPackage coverage: 17% overall\n\nTests needed:\n- Date selection\n- Month navigation\n- Disabled dates\n- Date range handling\n- Keyboard navigation\n- Accessibility\n\nFiles: packages/design-system/src/primitives/Calendar/Calendar.tsx","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T13:26:31.268078-06:00","updated_at":"2025-12-23T13:33:03.131318-06:00","closed_at":"2025-12-23T13:33:03.131318-06:00","dependencies":[{"issue_id":"scribe-g6j.19","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:31.268425-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.2","title":"Consolidate duplicate note-factory.ts patterns (619 lines)","description":"Consolidate duplicate note-factory.ts patterns (619 lines).\n\nThe note-factory.ts file has 619 lines with significant code duplication between factory functions.\n\n**Duplication pattern:** createTestNote, createMockNote, createGraphTestNote, and createContentTestNote all have nearly identical switch statements for handling note types (daily, meeting, person, etc.).\n\n**Content helpers (lines 109-291):** Should move to separate content-factory.ts or use imports from consolidated content functions (g6j.7, g6j.8, g6j.9).\n\n**BLOCKED BY:** Should wait for g6j.7, g6j.8, g6j.9 to complete so content functions are consolidated first.\n\n**Implementation Steps:**\n1. Wait for content consolidation tasks (g6j.7, g6j.8, g6j.9) to complete\n2. Import createDailyContent, createMeetingContent, createPersonContent from canonical sources\n3. Remove duplicate content creation logic from note-factory.ts\n4. Create a single base factory function with builder pattern\n5. Reduce 4 factory functions to 1 configurable factory OR keep named exports but share implementation\n6. Run `bun test packages/test-utils` to verify\n\n**UNBLOCKS:** scribe-g6j.32 (test utilities for `as any` elimination)\n\nFiles: packages/test-utils/src/note-factory.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T13:26:29.851436-06:00","updated_at":"2025-12-23T14:26:53.292548-06:00","closed_at":"2025-12-23T14:26:53.292548-06:00","dependencies":[{"issue_id":"scribe-g6j.2","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:29.851808-06:00","created_by":"daemon"},{"issue_id":"scribe-g6j.2","depends_on_id":"scribe-g6j.7","type":"blocks","created_at":"2025-12-23T13:39:06.20779-06:00","created_by":"daemon"},{"issue_id":"scribe-g6j.2","depends_on_id":"scribe-g6j.8","type":"blocks","created_at":"2025-12-23T13:39:06.254808-06:00","created_by":"daemon"},{"issue_id":"scribe-g6j.2","depends_on_id":"scribe-g6j.9","type":"blocks","created_at":"2025-12-23T13:39:06.299885-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.20","title":"Add unit tests for design-system FloatingMenu primitive","description":"Design system FloatingMenu primitive has no unit tests.\n\nFile: packages/design-system/src/primitives/FloatingMenu/FloatingMenu.tsx (307 lines)\n\nCurrent coverage: 0%\nPackage coverage: 17% overall\n\nThis is one of the larger primitives. Tests needed:\n- Positioning calculations\n- Show/hide behavior\n- Keyboard navigation\n- Click outside handling\n- Anchor element tracking\n\nFiles: packages/design-system/src/primitives/FloatingMenu/FloatingMenu.tsx","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T13:26:31.354317-06:00","updated_at":"2025-12-23T13:33:04.669834-06:00","closed_at":"2025-12-23T13:33:04.669834-06:00","dependencies":[{"issue_id":"scribe-g6j.20","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:31.354648-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.21","title":"Add unit tests for cli-installer.ts (312 lines, complex symlink logic)","description":"Add unit tests for cli-installer.ts (311 lines, complex symlink logic).\n\nFile: apps/desktop/electron/main/src/cli-installer.ts\n\nComplex logic includes:\n- Symlink creation and verification\n- PATH configuration detection (bash, zsh, fish)\n- Existing file handling (overwrite, skip)\n- Error recovery scenarios\n- Multiple file system operations\n- Cross-platform considerations (Darwin)\n\n**Tests needed:**\n- Test symlink creation success/failure\n- Test PATH detection for different shells (~/.zshrc, ~/.bashrc, ~/.config/fish/config.fish)\n- Test existing file handling (overwrite, skip, backup)\n- Mock filesystem operations for isolation\n- Error scenario coverage (permission denied, file exists, etc.)\n- Test uninstall/cleanup logic\n\n**Implementation approach:**\n1. Create `apps/desktop/electron/main/src/cli-installer.test.ts`\n2. Mock `fs` module for file system operations\n3. Mock `child_process` for shell detection\n4. Test each public function in isolation\n5. Test integration scenarios\n\nThis is HIGH PRIORITY - complex logic with file system side effects.\n\n**Parallel safe:** No dependencies on other tasks.\n\nFiles: apps/desktop/electron/main/src/cli-installer.ts, apps/desktop/electron/main/src/cli-installer.test.ts (NEW)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T13:26:31.439187-06:00","updated_at":"2025-12-23T14:10:10.331267-06:00","closed_at":"2025-12-23T14:10:10.331267-06:00","dependencies":[{"issue_id":"scribe-g6j.21","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:31.439552-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.22","title":"Add unit tests for CLI input.ts (stdin/file reading)","description":"CLI input.ts (154 lines) has no tests for stdin/file reading logic.\n\nFile: apps/cli/src/input.ts\n\nComplex logic includes:\n- stdin reading with size limits\n- File input handling\n- Escape sequence processing\n- Error handling for edge cases\n\nTests needed:\n- Test stdin reading\n- Test file reading\n- Test escape sequence processing\n- Test size limit enforcement\n- Test error handling\n\nThis is HIGH PRIORITY - input handling is critical for CLI reliability.\n\n**Parallel safe:** No dependencies on other tasks.\n\nFiles: apps/cli/src/input.ts","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T13:26:31.516639-06:00","updated_at":"2025-12-23T14:07:38.7699-06:00","closed_at":"2025-12-23T14:07:38.7699-06:00","dependencies":[{"issue_id":"scribe-g6j.22","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:31.517013-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.23","title":"Add unit tests for CLI config.ts","description":"CLI config.ts (50 lines) has no tests.\n\nFile: apps/cli/src/config.ts\n\nLogic includes:\n- Configuration file loading\n- JSON parsing error handling\n- Missing config file handling\n\nTests needed:\n- Test config loading success\n- Test malformed JSON handling\n- Test missing config file behavior\n- Test default values\n\n**Parallel safe:** No dependencies on other tasks.\n\nFiles: apps/cli/src/config.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T13:26:31.596928-06:00","updated_at":"2025-12-23T14:10:09.147322-06:00","closed_at":"2025-12-23T14:10:09.147322-06:00","dependencies":[{"issue_id":"scribe-g6j.23","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:31.597351-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.24","title":"Add unit tests for PersonMentionNode.ts","description":"PersonMentionNode.ts (183 lines) is a Lexical decorator node with no tests.\n\nFile: apps/desktop/renderer/src/components/Editor/plugins/PersonMentionNode.ts\n\nComplex logic includes:\n- Serialization/deserialization\n- Clone operation\n- DOM creation\n- Click handling and navigation\n\nTests needed:\n- Test serialization to JSON\n- Test deserialization from JSON\n- Test clone produces correct copy\n- Test DOM output structure\n- Test click handler navigation\n\nFiles: apps/desktop/renderer/src/components/Editor/plugins/PersonMentionNode.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T13:26:31.673279-06:00","updated_at":"2025-12-23T14:13:43.69751-06:00","closed_at":"2025-12-23T14:13:43.69751-06:00","dependencies":[{"issue_id":"scribe-g6j.24","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:31.67363-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.25","title":"Add unit tests for InlineLinkNode.ts","description":"InlineLinkNode.ts has no tests.\n\nFile: apps/desktop/renderer/src/components/Editor/plugins/InlineLinkNode.ts\n\nHandles external link rendering and URL validation.\n\nTests needed:\n- Test URL validation\n- Test rendering output\n- Test serialization/deserialization\n- Test link click behavior\n\nFiles: apps/desktop/renderer/src/components/Editor/plugins/InlineLinkNode.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T13:26:31.746966-06:00","updated_at":"2025-12-23T14:15:35.120599-06:00","closed_at":"2025-12-23T14:15:35.120599-06:00","dependencies":[{"issue_id":"scribe-g6j.25","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:31.750781-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.26","title":"Add unit tests for tasksHandlers.ts toggleChecklistNode logic","description":"tasksHandlers.ts has integration tests but lacks unit tests for the toggleChecklistNode logic.\n\nFile: apps/desktop/electron/main/src/handlers/tasksHandlers.ts\n\nThe toggleChecklistNode function has complex fallback logic for finding and toggling task nodes in the editor state. This deserves isolated unit testing.\n\nTests needed:\n- Test finding checklist node by various identifiers\n- Test toggle behavior (checked -\u003e unchecked, unchecked -\u003e checked)\n- Test fallback logic when node not found\n- Test error handling\n\nFiles: apps/desktop/electron/main/src/handlers/tasksHandlers.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T13:26:31.824093-06:00","updated_at":"2025-12-23T14:25:48.079038-06:00","closed_at":"2025-12-23T14:25:48.079038-06:00","dependencies":[{"issue_id":"scribe-g6j.26","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:31.824476-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.27","title":"Fix skipped rollback tests in useNoteState.test.ts","description":"Two tests are skipped in useNoteState.test.ts indicating incomplete rollback functionality.\n\nFile: apps/desktop/renderer/src/hooks/useNoteState.test.ts\n\nSkipped tests (lines 473-527):\n1. 'rolls back on save failure (success: false)' (line 475)\n2. 'rolls back on save exception' (line 501)\n\nComment: \"TODO: Fix rollback tests - they have timing issues with hook's ref-based rollback mechanism\"\n\nThis indicates:\n- Rollback functionality may not work correctly\n- Tests have timing issues with ref-based mechanism\n- Technical debt in both implementation and tests\n\nSolution: Fix the underlying rollback implementation, then unskip tests.\n\nFiles: apps/desktop/renderer/src/hooks/useNoteState.test.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T13:26:31.901162-06:00","updated_at":"2025-12-23T14:15:22.124183-06:00","closed_at":"2025-12-23T14:15:22.124183-06:00","dependencies":[{"issue_id":"scribe-g6j.27","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:31.901532-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.28","title":"Document escapeMarkdownText algorithm in content-extractor.ts","description":"Document escapeMarkdownText algorithm in markdown-escaper.ts.\n\n**BLOCKED BY:** scribe-g6j.1 (refactor content-extractor first - this function will move to markdown-escaper.ts)\n\nThe escapeMarkdownText function (~156 lines, currently lines 247-402) is complex pattern matching without algorithmic documentation.\n\n**Current state:** No high-level comment explaining the algorithm approach, the state machine used for tracking line starts, emphasis characters, etc.\n\nThe function handles:\n- Detecting emphasis patterns (*bold*, _italic_, **strong**, __strong__)\n- Tracking line state (isAtLineStart for # \u003e - + * escaping)\n- Complex character escaping rules for Markdown special chars\n- Table context handling (pipe escaping)\n- Ordered list detection (1. 2. etc.)\n- Link bracket escaping\n\n**Implementation Steps:**\n1. Wait for g6j.1 to complete (function will move to markdown-escaper.ts)\n2. Add JSDoc block comment at function start explaining:\n   - Overall algorithm approach (character-by-character state machine)\n   - State tracking: isAtLineStart, context.isInTable\n   - Key decision points for escaping\n   - Edge cases handled (nested emphasis, line boundaries, mid-word patterns)\n3. Add inline comments for non-obvious patterns\n4. Consider adding ASCII diagrams for complex logic\n\nFiles: packages/shared/src/markdown-escaper.ts (after g6j.1)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T13:26:31.984868-06:00","updated_at":"2025-12-23T14:12:49.660642-06:00","closed_at":"2025-12-23T14:12:49.660642-06:00","dependencies":[{"issue_id":"scribe-g6j.28","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:31.985293-06:00","created_by":"daemon"},{"issue_id":"scribe-g6j.28","depends_on_id":"scribe-g6j.1","type":"blocks","created_at":"2025-12-23T13:33:08.834167-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.29","title":"Add JSDoc to createCLI function in cli.ts","description":"The createCLI function in cli.ts lacks JSDoc documentation.\n\nFile: apps/cli/src/cli.ts\n\nMissing documentation for:\n- Function purpose\n- Return value (Command object)\n- Available global options\n- Subcommand organization\n- How to extend the CLI\n\nExample JSDoc needed:\n```typescript\n/**\n * Creates and configures the Scribe CLI application.\n * \n * @returns Configured Commander.js Command instance\n * \n * @example\n * const cli = createCLI();\n * cli.parseAsync(process.argv);\n */\n```\n\nFiles: apps/cli/src/cli.ts","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T13:26:32.067917-06:00","updated_at":"2025-12-23T14:28:58.95387-06:00","closed_at":"2025-12-23T14:28:58.95387-06:00","dependencies":[{"issue_id":"scribe-g6j.29","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:32.068288-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.3","title":"Split TableKeyboardPlugin.tsx into table utility modules","description":"TableKeyboardPlugin.tsx is 515 lines with ~15 internal helper functions for table manipulation.\n\nCurrent structure: All helper functions are internal but could be extracted:\n- tableSelectionUtils.ts - Selection-related helpers ($isSelectionInTable, $getTableCellFromSelection, etc.)\n- tableNavigationUtils.ts - Navigation helpers ($isFirstCellInTable, $isLastCellInTable, $exitTableBefore/After)\n- TableKeyboardPlugin.tsx - Just the React component registering commands\n\nBenefits: Reduces cognitive load when debugging table issues, enables reuse of table utilities.\n\nFiles: apps/desktop/renderer/src/components/Editor/plugins/TableKeyboardPlugin.tsx","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T13:26:29.926283-06:00","updated_at":"2025-12-23T14:11:01.556072-06:00","closed_at":"2025-12-23T14:11:01.556072-06:00","dependencies":[{"issue_id":"scribe-g6j.3","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:29.926671-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.30","title":"Add JSDoc to createWindow function in main.ts","description":"The createWindow function in main.ts (lines 107-192) is 85 lines with no JSDoc.\n\nFile: apps/desktop/electron/main/src/main.ts\n\nComplex configuration includes:\n- Window dimensions and bounds\n- Preload script path\n- Web preferences (security settings)\n- Context menu setup\n- State restoration\n\nMissing documentation for:\n- Security settings rationale\n- Window configuration choices\n- Context menu behavior\n- State persistence\n\nFiles: apps/desktop/electron/main/src/main.ts","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T13:26:32.149659-06:00","updated_at":"2025-12-23T14:29:06.711179-06:00","closed_at":"2025-12-23T14:29:06.711179-06:00","dependencies":[{"issue_id":"scribe-g6j.30","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:32.149997-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.31","title":"Document magic numbers in fuzzy-search.ts and hash-utils.ts","description":"Magic numbers in fuzzy-search.ts and hash-utils.ts lack rationale documentation.\n\nfuzzy-search.ts:\n- FUZZY_MATCH_THRESHOLD = 0.3 (why 0.3?)\n- SUBSTRING_MATCH_BASE = 0.9 (why 0.9?)\n- ALL_WORDS_MATCH_SCORE = 0.85 (why 0.85?)\n\nhash-utils.ts:\n- DJB2_HASH_INITIAL = 5381 (why 5381?)\n- DJB2_HASH_MULTIPLIER = 33 (why 33?)\n- TEXT_HASH_LENGTH = 16 (why 16?)\n\nAdd inline comments explaining:\n- Why these specific values were chosen\n- What user testing/research informed the fuzzy search thresholds\n- That 5381 is a prime for good hash distribution\n- That 33 is traditional in DJB2 algorithm\n\nFiles: packages/shared/src/fuzzy-search.ts, packages/shared/src/hash-utils.ts","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T13:26:32.232644-06:00","updated_at":"2025-12-23T14:27:57.539355-06:00","closed_at":"2025-12-23T14:27:57.539355-06:00","dependencies":[{"issue_id":"scribe-g6j.31","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:32.233034-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.32","title":"Create test utilities to eliminate as any casts in integration tests","description":"Create test utilities to eliminate `as any` casts in integration tests.\n\n**BLOCKED BY:** scribe-g6j.12, scribe-g6j.2 (test infrastructure must be consolidated first)\n\nHigh-priority files with `as any` casts:\n- templates.integration.test.ts (lines 372, 509-510, 522) - child nodes\n- linked-notes.integration.test.ts (lines 145, 333, 648, 688, 789, 860) - paragraph content\n- date-based-mentions.integration.test.ts (lines 226-227, 593-594, 682-683) - timestamp overrides\n- delete-note.integration.test.ts (lines 420, 471) - test data\n- meeting.test.ts (lines 9, 17-18, 26-31, 42) - content types\n\n**Common patterns requiring utilities:**\n1. Timestamp overrides for deterministic testing\n2. Content type coercion for factory functions\n3. Child node access in editor content\n\n**Implementation Steps:**\n1. Wait for g6j.12 (test helpers migration) and g6j.2 (note-factory consolidation)\n2. Add to @scribe/test-utils:\n   - `function createTestNoteWithOverrides\u003cT extends Note\u003e(base: Partial\u003cT\u003e): T`\n   - `function withTimestamp\u003cT\u003e(obj: T, timestamp: number): T \u0026 { createdAt: number; updatedAt: number }`\n   - Generic content builders with proper typing\n3. Update integration tests to use new utilities\n4. Run linter to verify no new `as any` casts remain\n\nFiles: apps/desktop/test-helpers.ts, packages/test-utils/src/note-factory.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T13:26:32.311068-06:00","updated_at":"2025-12-23T14:36:39.938629-06:00","closed_at":"2025-12-23T14:36:39.938629-06:00","dependencies":[{"issue_id":"scribe-g6j.32","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:32.311422-06:00","created_by":"daemon"},{"issue_id":"scribe-g6j.32","depends_on_id":"scribe-g6j.12","type":"blocks","created_at":"2025-12-23T13:33:14.797595-06:00","created_by":"daemon"},{"issue_id":"scribe-g6j.32","depends_on_id":"scribe-g6j.2","type":"blocks","created_at":"2025-12-23T13:33:15.622359-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.33","title":"Refactor handlers to use EngineOrchestrator consistently","description":"IPC handlers use inconsistent patterns for accessing engines.\n\nPattern A - Direct vault access (read-only):\n```typescript\nipcMain.handle('notes:list', async () =\u003e {\n  const vault = requireVault(deps);\n  return vault.list();\n});\n```\n\nPattern B - Using withEngines helper (write operations):\n```typescript\nipcMain.handle('notes:save', withEngines(deps, async (engines, note) =\u003e {...}));\n```\n\nThe EngineOrchestrator (apps/desktop/electron/main/src/EngineOrchestrator.ts) exists but isn't used consistently in all handlers.\n\nSolution:\n1. Document the intentional difference between patterns in code comments\n2. Refactor write operations to use EngineOrchestrator consistently\n3. Add CONTRIBUTING.md documentation for when to use each pattern\n\nFiles: apps/desktop/electron/main/src/handlers/notesHandlers.ts, apps/desktop/electron/main/src/EngineOrchestrator.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T13:26:32.38807-06:00","updated_at":"2025-12-23T14:27:32.742682-06:00","closed_at":"2025-12-23T14:27:32.742682-06:00","dependencies":[{"issue_id":"scribe-g6j.33","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:32.388416-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.34","title":"Convert remaining Promise .then()/.catch() to async/await","description":"Legacy Promise .then()/.catch() patterns should be converted to async/await.\n\nLocations:\n1. packages/engine-core/src/task-index.ts line 206:\n   this.persist().catch((err) =\u003e {...})\n\n2. packages/test-utils/src/vault-factory.ts lines 98, 179:\n   .catch(() =\u003e {}) for cleanup\n\n3. apps/cli/src/index.ts line 16:\n   cli.parseAsync(process.argv).catch(...)\n\n4. apps/desktop/electron/main/src/main.ts line 194:\n   app.whenReady().then(async () =\u003e {...})\n\nThe app.whenReady().then() is borderline acceptable for entry point code, but the others should use try/catch with async/await for consistency.\n\nFiles: packages/engine-core/src/task-index.ts, apps/desktop/electron/main/src/main.ts","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T13:26:32.461623-06:00","updated_at":"2025-12-23T14:30:04.344281-06:00","closed_at":"2025-12-23T14:30:04.344281-06:00","dependencies":[{"issue_id":"scribe-g6j.34","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:32.461959-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.4","title":"Extract autocomplete hooks into separate files","description":"useTriggerableAutocomplete.ts is 498 lines with three hooks in one file:\n1. useTriggerableAutocomplete - Main hook for wiki-links [[  and mentions @\n2. useAutocompleteKeyboardNavigation - Keyboard navigation\n3. useClickOutside - Generic click outside detection\n\nProposed split:\n- useTriggerableAutocomplete.ts - Main hook only\n- useAutocompleteKeyboard.ts - Keyboard navigation hook\n- useClickOutside.ts - Generic reusable click outside hook\n\nThe useClickOutside hook is generic and could be reused elsewhere in the codebase.\n\nFiles: apps/desktop/renderer/src/components/Editor/hooks/useTriggerableAutocomplete.ts","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T13:26:30.000154-06:00","updated_at":"2025-12-23T14:32:47.050644-06:00","closed_at":"2025-12-23T14:32:47.050644-06:00","dependencies":[{"issue_id":"scribe-g6j.4","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:30.000698-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.5","title":"Merge CLI ErrorCode enum into shared package","description":"Merge CLI ErrorCode enum into shared package.\n\nTwo separate ErrorCode enums exist with overlapping codes:\n\n**CLI (apps/cli/src/errors.ts) - 7 codes:**\n- INTERNAL_ERROR, VAULT_NOT_FOUND, NOTE_NOT_FOUND\n- INVALID_INPUT, WRITE_FAILED, PERMISSION_DENIED, HAS_BACKLINKS\n\n**Shared (packages/shared/src/errors.ts) - 20+ codes:**\n- FILE_NOT_FOUND, FILE_READ_ERROR, FILE_WRITE_ERROR...\n- NOTE_NOT_FOUND (duplicate!), INVALID_NOTE_FORMAT, NOTE_CORRUPT\n- VAULT_NOT_INITIALIZED, VALIDATION_ERROR, etc.\n\n**Implementation Steps:**\n1. Add CLI-specific codes to shared ErrorCode enum:\n   - INTERNAL_ERROR (if not present)\n   - HAS_BACKLINKS\n   - VAULT_NOT_FOUND (map to VAULT_NOT_INITIALIZED or add)\n2. Update CLI to import ErrorCode from @scribe/shared\n3. CLIError can extend ScribeError or use shared codes\n4. Update EXIT_CODES mapping in CLI to use shared codes\n5. Remove duplicate enum from apps/cli/src/errors.ts\n6. Run `bun test apps/cli` to verify\n\n**Parallel safe:** No dependencies on other tasks.\n\nFiles: apps/cli/src/errors.ts, packages/shared/src/errors.ts","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T13:26:30.076838-06:00","updated_at":"2025-12-23T13:58:11.749827-06:00","closed_at":"2025-12-23T13:58:11.749827-06:00","dependencies":[{"issue_id":"scribe-g6j.5","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:30.077178-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.6","title":"Consolidate wrapError function into shared handler utilities","description":"Consolidate wrapError function into shared handler utilities.\n\nIdentical wrapError function duplicated in two handler files:\n\n**notesHandlers.ts (lines 52-59):**\n```typescript\nfunction wrapError(error: unknown): never {\n  if (error instanceof ScribeError) {\n    const userError = new Error(error.getUserMessage());\n    userError.name = error.code;\n    throw userError;\n  }\n  throw error;\n}\n```\n\n**peopleHandlers.ts (lines 43-50):** Identical implementation\n\n**Implementation Steps:**\n1. Add wrapError to `apps/desktop/electron/main/src/handlers/types.ts`\n2. Export from types.ts alongside requireVault, withEngines, etc.\n3. Update notesHandlers.ts to import wrapError from './types'\n4. Update peopleHandlers.ts to import wrapError from './types'\n5. Remove local wrapError definitions\n6. Search for other handlers that might benefit (meetingHandlers, dailyHandlers)\n7. Run `bun test apps/desktop` to verify\n\n**Parallel safe:** No dependencies on other tasks.\n\nFiles: apps/desktop/electron/main/src/handlers/notesHandlers.ts, apps/desktop/electron/main/src/handlers/peopleHandlers.ts, apps/desktop/electron/main/src/handlers/types.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T13:26:30.15794-06:00","updated_at":"2025-12-23T13:55:51.289724-06:00","closed_at":"2025-12-23T13:55:51.289724-06:00","dependencies":[{"issue_id":"scribe-g6j.6","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:30.158313-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.7","title":"Consolidate createDailyContent into single source of truth","description":"Consolidate createDailyContent into single source of truth.\n\ncreateDailyContent function is duplicated in 6+ locations with identical logic:\n\n1. `apps/desktop/renderer/src/templates/daily.ts` (lines 10-40) - **Canonical source (already exists!)**\n2. `apps/desktop/electron/main/src/handlers/dailyHandlers.ts` (lines 51-81) - DUPLICATE\n3. `apps/desktop/daily-handlers.integration.test.ts` (lines 31-68) - DUPLICATE\n4. `apps/desktop/meeting-handlers.integration.test.ts` (lines 34-67) - DUPLICATE\n5. `apps/desktop/date-based-meeting.integration.test.ts` (lines 30-63) - DUPLICATE\n6. `apps/desktop/templates.integration.test.ts` (lines 37-72) - DUPLICATE\n\n**Key insight:** The canonical source already exists at `apps/desktop/renderer/src/templates/daily.ts` and is exported!\n\n**Implementation Steps:**\n1. Update `dailyHandlers.ts` to import createDailyContent from `../../renderer/src/templates/daily.ts`\n2. Remove local createDailyContent definition from dailyHandlers.ts (keep the export)\n3. Update integration tests to import from canonical source OR use test-helpers\n4. Add re-export to test-helpers.ts: `export { createDailyContent } from './renderer/src/templates/daily';`\n5. Update test imports to use test-helpers\n6. Run `bun test apps/desktop` to verify all tests pass\n\n**Parallel safe:** Runs in parallel with g6j.8 and g6j.9.\n\n**UNBLOCKS:** scribe-g6j.12 (test helpers migration)\n\nFiles: apps/desktop/renderer/src/templates/daily.ts, apps/desktop/electron/main/src/handlers/dailyHandlers.ts","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T13:26:30.239801-06:00","updated_at":"2025-12-23T13:47:23.911245-06:00","closed_at":"2025-12-23T13:47:23.911245-06:00","dependencies":[{"issue_id":"scribe-g6j.7","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:30.24019-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.8","title":"Consolidate createMeetingContent into single source of truth","description":"Consolidate createMeetingContent into single source of truth.\n\ncreateMeetingContent function duplicated in 5+ locations:\n\n1. `apps/desktop/renderer/src/templates/meeting.ts` (lines 52-70) - **Canonical source (already exists!)**\n2. `apps/desktop/electron/main/src/handlers/meetingHandlers.ts` (lines 54-104) - DUPLICATE\n3. `apps/desktop/meeting-handlers.integration.test.ts` (lines 69-103) - DUPLICATE\n4. `apps/desktop/date-based-meeting.integration.test.ts` (lines 65-100) - DUPLICATE\n5. `apps/desktop/templates.integration.test.ts` (lines 73-108) - DUPLICATE\n\n**Key insight:** The canonical source already exists at `apps/desktop/renderer/src/templates/meeting.ts`!\n\n**Implementation Steps:**\n1. Update `meetingHandlers.ts` to import createMeetingContent from `../../renderer/src/templates/meeting.ts`\n2. Remove local createMeetingContent definition from meetingHandlers.ts\n3. Add re-export to test-helpers.ts: `export { createMeetingContent } from './renderer/src/templates/meeting';`\n4. Update test imports to use test-helpers\n5. Run `bun test apps/desktop` to verify all tests pass\n\n**Parallel safe:** Runs in parallel with g6j.7 and g6j.9.\n\n**UNBLOCKS:** scribe-g6j.12 (test helpers migration)\n\nFiles: apps/desktop/renderer/src/templates/meeting.ts, apps/desktop/electron/main/src/handlers/meetingHandlers.ts","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T13:26:30.325653-06:00","updated_at":"2025-12-23T13:51:23.868306-06:00","closed_at":"2025-12-23T13:51:23.868306-06:00","dependencies":[{"issue_id":"scribe-g6j.8","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:30.326044-06:00","created_by":"daemon"}]}
{"id":"scribe-g6j.9","title":"Consolidate createPersonContent into single source of truth","description":"Consolidate createPersonContent into single source of truth.\n\n**IMPORTANT:** No person template file exists yet! This task should CREATE the canonical source.\n\nCurrent locations:\n1. apps/desktop/test-helpers.ts (lines 237-255) - Used by tests\n2. apps/desktop/electron/main/src/handlers/peopleHandlers.ts (lines 63-92) - Used at runtime\n3. apps/desktop/people-handlers.integration.test.ts (as createPersonContentInternal, lines 34-56)\n\n**Implementation Steps:**\n1. Create `apps/desktop/renderer/src/templates/person.ts` (canonical source like daily.ts/meeting.ts)\n2. Export `createPersonContent(name: string): EditorContent \u0026 { type: 'person' }`\n3. Add to `apps/desktop/renderer/src/templates/index.ts` exports\n4. Update `peopleHandlers.ts` to import from templates/person.ts\n5. Update `test-helpers.ts` to re-export from templates/person.ts\n6. Remove createPersonContentInternal from integration tests, use canonical import\n7. Run `bun test apps/desktop` to verify all tests pass\n\n**Parallel safe:** Runs in parallel with g6j.7 and g6j.8.\n\n**UNBLOCKS:** scribe-g6j.12 (test helpers migration)\n\nFiles: apps/desktop/renderer/src/templates/person.ts (NEW), apps/desktop/electron/main/src/handlers/peopleHandlers.ts, apps/desktop/test-helpers.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T13:26:30.409757-06:00","updated_at":"2025-12-23T13:53:31.787659-06:00","closed_at":"2025-12-23T13:53:31.787659-06:00","dependencies":[{"issue_id":"scribe-g6j.9","depends_on_id":"scribe-g6j","type":"parent-child","created_at":"2025-12-23T13:26:30.410158-06:00","created_by":"daemon"}]}
{"id":"scribe-lg3","title":"Remove dead TableKeyboardPlugin.tsx from plugins/ directory","description":"The old 516-line TableKeyboardPlugin.tsx in plugins/ directory is dead code. The refactored version lives in plugins/table/ and is already being used by EditorRoot.tsx. Safe to delete the old file.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T14:11:12.453197-06:00","updated_at":"2025-12-23T14:11:43.259697-06:00","closed_at":"2025-12-23T14:11:43.259697-06:00"}
