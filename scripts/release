#!/usr/bin/env bash

set -e

# Script to trigger the GitHub release workflow
# Usage: release [tag]
#   tag: Optional tag to release (e.g., v1.2.3). If omitted, uses latest tag.

TAG="${1:-}"

if [ -n "$TAG" ]; then
    echo "Triggering release workflow for tag: $TAG"
    gh workflow run release.yml --field tag="$TAG"
else
    echo "Triggering release workflow with latest tag"
    gh workflow run release.yml
fi

echo "âœ“ Release workflow triggered"
echo ""
echo "To check the status, run:"
echo "  gh run list --workflow=release.yml"
echo ""
echo "To view the workflow logs, run:"
echo "  gh run watch"
